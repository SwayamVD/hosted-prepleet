<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>Company Wise Leetcode</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jost&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body data-bs-theme="dark">

  <div class="container-fluid mt-5">


<div class="row">
  <div class="col-12 col-md-4">
    <h2 class="mb-4">Company-Specific Questions</h2>
    <div id="company-list" class="d-flex flex-wrap gap-2 mb-4">
      <!-- Companies will be inserted here -->
    </div>
    <hr>
    <h2 class="mb-4">Notable Sets</h2>
    <div id="ques-sets" class="d-flex flex-wrap gap-2 mb-4">
    <button class="btn btn-dark border btn-sm rounded text-decoration-none" id="eeudwo2i" onclick="listquesset('eeudwo2i','Striver’s SDE Sheet')">Striver’s SDE Sheet</button>
    </div>

  </div>
  <div class="col-12 col-md-8">
    <div id="questions-container">
      <!-- Questions will be shown here -->
    </div>
  </div>
</div>

  </div>

  <script>
    let allQuestions = [];

fetch('/questions')
  .then(res => res.json())
  .then(data => {
    allQuestions = data;

    const companies = [...new Set(data.map(q => q.Company))];
    const companyList = document.getElementById('company-list');

    companies.forEach(company => {
      const btn = document.createElement('button');
      btn.className = 'btn btn-dark border btn-sm rounded';
      btn.innerText = company;

      btn.onclick = () => {
        // Remove 'active' class from all buttons
        document.querySelectorAll('#company-list .btn').forEach(b => {
          b.classList.remove('active');
        });

        document.querySelectorAll('#ques-sets .btn').forEach(b => {
          b.classList.remove('active');
        });
        // Add 'active' to clicked button
        btn.classList.add('active');

        // Call your function
        showQuestions(company);
      };

      companyList.appendChild(btn);
    });
  });



    function showQuestions(company) {
      const container = document.getElementById('questions-container');
      container.innerHTML = `<h4 class="mb-3">${company} Questions</h4>`;

      const questions = allQuestions.filter(q => q.Company === company);

      if (questions.length === 0) {
        container.innerHTML += `<p>No questions found for ${company}.</p>`;
        return;
      }

      const listGroup = document.createElement('div');
      listGroup.className = 'list-group questionlistcss';

      questions.forEach((q, index) => {
        const item = document.createElement('a');
        item.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-center';
        item.href = `/solve?title=${q.Slug}`;
        item.style.textDecoration = 'none';

        item.innerHTML = `
          <div class="question-title">${index + 1}. ${q.Title}</div>
          <span class="badge bg-${q.Difficulty === 'EASY' ? 'success' : q.Difficulty === 'MEDIUM' ? 'warning' : 'danger'}">${q.Difficulty}</span>
        `;

        listGroup.appendChild(item);
      });

      container.appendChild(listGroup);
    }

function listquesset(name,fname) {
  fetch(`/getquestionset/${name}`)
    .then(res => res.json())
    .then(data => {
      setq = data;  // Assign the response data to allQuestions

        document.querySelectorAll('#company-list .btn').forEach(b => {
          b.classList.remove('active');
        });

        const actbtn = document.getElementById("eeudwo2i")
        actbtn.classList.add("active")

      const container = document.getElementById('questions-container');
      container.innerHTML = `<h4 class="mb-3">${fname} Question Set</h4>`;

      // Check if there are any questions
      if (setq.length === 0) {
        container.innerHTML += `<p>No questions found for ${fname}.</p>`;
        return;
      }

      const listGroup = document.createElement('div');
      listGroup.className = 'list-group questionlistcss';

      // Loop through the questions and display them
      setq.forEach((q, index) => {
        const item = document.createElement('a');
        item.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-center';
        item.href = `/solve?title=${q.titleSlug}`; // Use titleSlug for URL
        item.style.textDecoration = 'none';

        item.innerHTML = `
          <div class="question-title">${index + 1}. ${q.title}</div>
          <span class="badge bg-${q.difficulty === 'EASY' ? 'success' : q.difficulty === 'MEDIUM' ? 'warning' : 'danger'}">${q.difficulty}</span>
        `;

        listGroup.appendChild(item);
      });

      container.appendChild(listGroup);
    })
    .catch(error => console.error('Error:', error));  // Error handling
}


  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
