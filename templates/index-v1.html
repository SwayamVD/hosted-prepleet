<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>Swayam Dusing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jost&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  <style>
    .question-card p {
      font-size: 0.95rem;
      margin-bottom: 0.5rem;
    }

    .question-card .btn {
      min-width: 80px;
    }

    .question-card {
      border-radius: 10px;
    }

    .company-pill {
      padding: 6px 14px;
      border: 1px solid #ccc;
      border-radius: 20px;
      font-weight: 500;
      background-color: white;
      box-shadow: 1px 1px 4px rgba(0,0,0,0.05);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .company-pill:hover {
      background-color: #f1f1f1;
    }

    .list-group-item {
      border-radius: 10px;
      margin-bottom: 10px;
    }

    /* Dark mode styles */
    .dark-mode {
      background-color: #1e1e1e !important;
      color: #eee;
    }

    .dark-mode .company-pill {
      background-color: #333;
      border-color: #444;
      color: #fff;
    }

    .dark-mode .company-pill:hover {
      background-color: #444;
    }

    .dark-mode .list-group-item {
      background-color: #2a2a2a;
      border-color: #444;
    }

    .dark-toggle {
      position: fixed;
      top: 16px;
      right: 20px;
      z-index: 1000;
    }

    .toggle-switch {
      width: 50px;
      height: 26px;
      background: #d1d5db;
      border-radius: 50px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .toggle-switch::before {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: transform 0.3s ease;
    }

    .dark-mode .toggle-switch {
      background: #4b5563;
    }

    .dark-mode .toggle-switch::before {
      transform: translateX(24px);
    }
    .dark-mode .list-group-item {
  color: #f1f1f1;
}


    @media (max-width: 576px) {
      .question-title {
        font-size: 0.9rem;
      }
      .btn-sm {
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body class="bg-light">

  <!-- Dark Mode Toggle -->
  <div class="dark-toggle" onclick="toggleDarkMode()">
    <div class="toggle-switch"></div>
  </div>

  <div class="container py-4">
    <h2 class="mb-4">LeetCode Questions by Company</h2>

    <div id="company-list" class="d-flex flex-wrap gap-2 mb-4">
      <!-- Companies will be inserted here -->
    </div>

    <div id="questions-container">
      <!-- Questions will be shown here -->
    </div>
  </div>

  <script>
    let allQuestions = [];

    fetch('/questions')
      .then(res => res.json())
      .then(data => {
        allQuestions = data;

        const companies = [...new Set(data.map(q => q.Company))];
        const companyList = document.getElementById('company-list');

        companies.forEach(company => {
          const btn = document.createElement('button');
          btn.className = 'company-pill';
          btn.innerText = company;
          btn.onclick = () => showQuestions(company);
          companyList.appendChild(btn);
        });
      });

    function showQuestions(company) {
      const container = document.getElementById('questions-container');
      container.innerHTML = `<h4 class="mb-3">${company} Questions</h4>`;

      const questions = allQuestions.filter(q => q.Company === company);

      if (questions.length === 0) {
        container.innerHTML += `<p>No questions found for ${company}.</p>`;
        return;
      }

      const listGroup = document.createElement('div');
      listGroup.className = 'list-group';

      questions.forEach((q, index) => {
        const item = document.createElement('a');
        item.className = 'list-group-item list-group-item-action d-flex justify-content-between align-items-center';
        item.href = `/solve?title=${q.Slug}`;
        item.style.textDecoration = 'none';

        item.innerHTML = `
          <div class="fw-bold question-title">${index + 1}. ${q.Title}</div>
          <span class="badge bg-${q.Difficulty === 'EASY' ? 'success' : q.Difficulty === 'MEDIUM' ? 'warning' : 'danger'}">${q.Difficulty}</span>
        `;

        listGroup.appendChild(item);
      });

      container.appendChild(listGroup);
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
